<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

<script>

    //--- agenda ---
    // function in obj + this
    // Constructors +
    // Classes +
    // Extend (совсем чуть-чуть) +
    // Callback functions of array :
    //     foreach +
    // filter +
    // sort +
    // map +
    // find +
    // custom Callback simple demo
    // JSON

    let users = [
        {name: 'vasya', age: 31, status: false},
        {name: 'petya', age: 30, status: true},
        {name: 'kolya', age: 29, status: true},
        {name: 'olya', age: 28, status: false},
        {name: 'max', age: 30, status: true},
        {name: 'anya', age: 31, status: false},
        {name: 'oleg', age: 28, status: false},
        {name: 'andrey', age: 29, status: true},
        {name: 'masha', age: 30, status: true},
        {name: 'olya', age: 31, status: false},
        {name: 'max', age: 31, status: true}
    ];

    // filter

    let filter = users.filter(function (user) {
        return user.status && user.age > 30;
    });
    console.log(filter);

    /* АБО */

    let filter1 = users.filter(user => user.status && user.age > 30);
    console.log(filter1);

    // sort

    let sort = users.sort(function (user1, user2) {
        return user1.age - user2.age;
    });
    console.log(sort);
    console.log(users);

    /* АБО */

    let sort1 = users.sort((user1, user2) => user1.age - user2.age);
    console.log(sort1);

    // find

    let find = users.find(function (value) {
        return value.name === 'max';
    });
    console.log(find);

    /* АБО */

    let find1 = users.find(value => value.name === 'max');

    // map

    let map = users.map(function (value, index) {     /*може приймати аргументи value, index, array*/
        console.log(value, index);
        value.id = index + 1;
        return value;
    });
    console.log(map);

    /* АБО */

    let map1 = users.map((value, index) => {
        value.id = index + 1;
        return value;
    });

    // forEach

    let numbers = [11, 22, 33, 44, 55, 66, 77, 88, 99];
    numbers.forEach(function (item) {
        console.log(item);
    });

    /* АБО -  */

    let print = (function (item) {
        console.log(item);
    });
    numbers.forEach(print);

    // Оголошення функцій. Функції в JS є об"єктами, які можна викликати за назвою:

    function a() {
    }

    a();    /*function declaration*/

    let b = function () {
    };
    b();     /*function expression; функція без назви називається анонімною*/

    let c = function (a, b) {
        return a + b
    };
    let d = (a, b) => a + b;

    // Функції-конструктори

    function User(name, age, status, someFn) {
        this.name = name;
        this.age = age;
        this.status = status;
        this.greeting = someFn;
    }

    let user = new User('vasya', 31, true, function () {
        console.log(this.name + ' ' + this.age);
    });
    console.log(user);
    user.greeting();

    let userrrs = [
        new User('vasya', 31, true),
        new User('petya', 30, false),
        new User('kolya', 20, false),
        new User('tolya', 41, true)
    ];

    // Класи

    class User1 {
        /*alt+insert or Code -> Generate...*/
        constructor(name, age, status) {
            this.name = name;
            this.age = age;
            this.status = status;
        }

        greeting() {
            console.log(this.name + 'hello!');
        }

        /*в даному випадку greeting() - це метод. Ф-ція, оголошена в тілі класу і прив"язана до об"єктів певного типу, називається методом*/
    }

    let user1 = new User1('vasya', 31, true);
    console.log(user1);
    console.log(new User1('petya', 30, false));
    console.log(new User1());

    let userrs = [
        new User1('vasya', 31, true),
        new User1('petya', 30, false),
        new User1('kolya', 20, false),
        new User1('tolya', 41, true)
    ];
    console.log(userrs);

    class Product {
        constructor(title, price) {
            this.title = title;
            this.price = price;
        }

        info() {
            return `title - ${this.title} , price - ${this.price}`;
        }
    }

    let product = new Product('bread', '12 uah');
    console.log(product);
    console.log(product.info());
    console.log(new Product('meat', '145 uah'));
    console.log(new Product());

    // (title, price, quantity); extends - розширення

    class Product2 extends Product {
        constructor(title, price, quantity) {
            super(title, price);
            this.quantity = quantity;
        }

        info() {
            return super.info();
        }
    }

    let SuperProduct = new Product2('juice', '25uah', 105);
    console.log(SuperProduct);
    console.log(SuperProduct.info());

    // custom Callback simple demo

    function calculator(a, b, callback) {
        callback(a, b);
    }

    calculator(10, 20, function (a, b) {
        console.log((a + b));
    });
    calculator(10, 20, function (a, b) {
        console.log((a - b));
    });

    calculator(10, 20, function (a, b) {
        console.log((a + b - 10));
    })

    // JSON

    let car = {model: 'q7', power: 300};
    // let car = '{"model": "q7", "power": 300}';

    let stringify = JSON.stringify(car);
    console.log(stringify);     //перетворення об"єкта в стрінгу
    let parse = JSON.parse(stringify);
    console.log(parse);     //перетворення стрінги в об"єкт

</script>

</body>
</html>